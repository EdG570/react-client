{"version":3,"sources":["api.js"],"names":[],"mappings":";;;;;;AAAA;;;;;;kBAEe;AAAA,SAAS;AAAA,WAAQ,kBAAU;AACxC,UAAI,OAAO,IAAP,IAAe,OAAO,IAAP,CAAY,MAA/B,EAAuC;AACrC,YAAI,UAAU,EAAd;AACA,YAAM,QAAQ,MAAM,QAAN,EAAd;AACA,YAAM,UAAU,OAAO,IAAP,CAAY,MAA5B;;AAEA,YAAI,MAAM,GAAN,CAAU,KAAd,EAAqB;AACnB,iBAAO,YAAP,CAAoB,GAApB,CAAwB,OAAxB,EAAiC,MAAM,GAAN,CAAU,KAA3C;AACA,kBAAQ,OAAR,GAAkB;AAChB,uCAAyB,MAAM,GAAN,CAAU;AADnB,WAAlB;AAGD;;AAED,6BAAM,OAAO,MAAP,CAAc,OAAd,EAAuB;AAC3B,kBAAQ,QAAQ,MADW;AAE3B,eAAK,QAAQ;AACb;AAH2B,SAAvB,CAAN,EAKG,IALH,CAKQ,UAAC,QAAD,EAAc;AAClB,gBAAM,QAAN,CAAe,EAAE,MAAS,OAAO,IAAhB,aAAF,EAAkC,SAAS,SAAS,IAApD,EAAf;AACD,SAPH,EAQG,KARH,CAQS,UAAC,GAAD,EAAS;AACd,gBAAM,QAAN,CAAe,EAAE,MAAS,OAAO,IAAhB,WAAF,EAAgC,SAAS,GAAzC,EAAf;AACD,SAVH;AAWD;;AAED,aAAO,KAAK,MAAL,CAAP;AACD,KA3BuB;AAAA,GAAT;AAAA,C","file":"api-compiled.js","sourcesContent":["import axios from 'axios';\n\nexport default store => next => action => {\n  if (action.meta && action.meta.remote) {\n    let options = {};\n    const state = store.getState();\n    const request = action.meta.remote;\n\n    if (state.app.token) {\n      window.localStorage.set('token', state.app.token);\n      options.headers = {\n        authorization: `Bearer ${state.app.token}`\n      }\n    }\n    \n    axios(Object.assign(options, {\n      method: request.method,\n      url: request.url\n      // data: action.payload\n    }))\n      .then((response) => {\n        store.dispatch({ type: `${action.type}_SUCCESS`, payload: response.data});\n      })\n      .catch((err) => {\n        store.dispatch({ type: `${action.type}_ERROR`, payload: err});\n      });\n  }\n  \n  return next(action);\n};\n"]}