{"version":3,"sources":["api.js"],"names":[],"mappings":";;;;;;AAAA;;;;;;kBAEe;AAAA,SAAS;AAAA,WAAQ,kBAAU;AACxC,UAAI,OAAO,IAAP,IAAe,OAAO,IAAP,CAAY,MAA/B,EAAuC;AACrC,YAAI,UAAU,EAAd;AACA,YAAM,QAAQ,MAAM,QAAN,EAAd;AACA,YAAM,UAAU,OAAO,IAAP,CAAY,MAA5B;AACA,YAAM,QAAQ;AACZ,kBAAQ,QAAQ,MADJ;AAEZ,eAAK,QAAQ;AAFD,SAAd;;AAKA,YAAI,MAAM,GAAN,CAAU,KAAd,EAAqB;AACnB,iBAAO,YAAP,CAAoB,GAApB,CAAwB,OAAxB,EAAiC,MAAM,GAAN,CAAU,KAA3C;AACA,kBAAQ,OAAR,GAAkB;AAChB,uCAAyB,MAAM,GAAN,CAAU;AADnB,WAAlB;AAGD;;AAED,YAAI,OAAO,OAAX,EAAoB;AAClB,gBAAM,IAAN,GAAa,OAAO,OAApB;AACD;;AAED,6BAAM,OAAO,MAAP,CAAc,OAAd,EAAuB,KAAvB,CAAN,EACG,IADH,CACQ,UAAC,QAAD,EAAc;AAClB,gBAAM,QAAN,CAAe,EAAE,MAAS,OAAO,IAAhB,aAAF,EAAkC,SAAS,SAAS,IAApD,EAAf;AACD,SAHH,EAIG,KAJH,CAIS,UAAC,GAAD,EAAS;AACd,gBAAM,QAAN,CAAe,EAAE,MAAS,OAAO,IAAhB,WAAF,EAAgC,SAAS,GAAzC,EAAf;AACD,SANH;AAOD;;AAED,aAAO,KAAK,MAAL,CAAP;AACD,KA/BuB;AAAA,GAAT;AAAA,C","file":"api-compiled.js","sourcesContent":["import axios from 'axios';\n\nexport default store => next => action => {\n  if (action.meta && action.meta.remote) {\n    let options = {};\n    const state = store.getState();\n    const request = action.meta.remote;\n    const query = {\n      method: request.method,\n      url: request.url\n    };\n\n    if (state.app.token) {\n      window.localStorage.set('token', state.app.token);\n      options.headers = {\n        authorization: `Bearer ${state.app.token}`\n      }\n    }\n\n    if (action.payload) {\n      query.data = action.payload;\n    }\n    \n    axios(Object.assign(options, query))\n      .then((response) => {\n        store.dispatch({ type: `${action.type}_SUCCESS`, payload: response.data });\n      })\n      .catch((err) => {\n        store.dispatch({ type: `${action.type}_ERROR`, payload: err});\n      });\n  }\n  \n  return next(action);\n};\n"]}